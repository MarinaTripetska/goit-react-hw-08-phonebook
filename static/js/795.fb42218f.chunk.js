"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[795],{9795:function(n,e,t){t.r(e),t.d(e,{PhoneBookPage:function(){return U},default:function(){return X}});var r,i,o,a,c,s,d,u,l,p,x,h,m,f=t(168),g=t(5048),w=t(1799),b=t(6031),j=t(184),v=b.ZP.label(r||(r=(0,f.Z)(["\n  margin-bottom: 50px;\n\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: 10px;\n\n  font-weight: 600;\n  & input {\n    margin-left: 15px;\n  }\n"]))),Z=function(){var n=(0,g.v9)((function(n){return n.filter})),e=(0,g.I0)();return(0,j.jsxs)(v,{children:["Find contacts by name",(0,j.jsx)("input",{type:"text",onChange:function(n){return e((0,w.ko)(n.target.value))},value:n})]})},y=t(885),C=t(2791),P=t(6856),k=t(8820),L=b.ZP.li(i||(i=(0,f.Z)(["\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  column-gap: 30px;\n\n  &:not(:last-child) {\n    margin-bottom: 20px;\n  }\n\n  @media (max-width: 450px) {\n    column-gap: 15px;\n  }\n"]))),S=b.ZP.span(o||(o=(0,f.Z)(["\n  font-weight: 600;\n  font-size: 1em;\n"]))),z=b.ZP.a(a||(a=(0,f.Z)(["\n  white-space: nowrap;\n  color: inherit;\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  column-gap: 7px;\n"]))),E=b.ZP.button(c||(c=(0,f.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  column-gap: 10px;\n\n  width: 100%;\n  max-width: 100px;\n  height: 35px;\n  padding: 5px;\n  background-color: var(--button-color);\n  color: white;\n  cursor: pointer;\n  user-select: none;\n  border: solid 1px black;\n  border-radius: 3px;\n\n  justify-self: end;\n\n  @media (max-width: 450px) {\n    width: 40px;\n    font-size: 22px;\n    & span {\n      display: none;\n    }\n  }\n"]))),N=t(4164),_=b.ZP.div(s||(s=(0,f.Z)(["\n  position: fixed;\n  z-index: 3;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  padding: 50px;\n  background-color: rgba(0, 0, 0, 0.466);\n"]))),A=b.ZP.div(d||(d=(0,f.Z)(["\n  position: absolute;\n  width: 100%;\n  max-width: 70vw;\n  max-height: 50vh;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  padding: 25px;\n  background-color: #fff;\n\n  @media screen and (min-width: 768px) {\n    max-width: 768px;\n  }\n\n  @media screen and (min-width: 1200px) {\n    max-width: 1200px;\n  }\n"]))),F=b.ZP.button(u||(u=(0,f.Z)(["\n  position: absolute;\n  top: -50px;\n  right: -10px;\n\n  width: 30px;\n  height: 30px;\n  border: none;\n  border-radius: 50%;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  cursor: pointer;\n"]))),I=function(n){var e=n.onClose,t=n.children;(0,C.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(n){"Escape"===n.code&&e()};return(0,N.createPortal)((0,j.jsx)(_,{onClick:function(n){n.currentTarget===n.target&&e()},children:(0,j.jsxs)(A,{children:[t,(0,j.jsx)(F,{type:"button",children:"x",onClick:function(){return e()}})]})}),document.getElementById("modal-portal"))},B=b.ZP.form(l||(l=(0,f.Z)(["\n  padding: 5px;\n\n  display: grid;\n  grid-template-areas:\n    'rowName buttonSubmit'\n    'rowNumber buttonSubmit';\n\n  grid-gap: 20px;\n\n  @media (max-width: 480px) {\n    grid-gap: 10px;\n    grid-template-areas:\n      'rowName '\n      'rowNumber'\n      'buttonSubmit';\n  }\n"]))),D=b.ZP.label(p||(p=(0,f.Z)(["\n  display: inline-flex;\n  justify-content: space-between;\n  column-gap: 20px;\n\n  font-weight: 700;\n  font-size: 1.5em;\n\n  & input {\n    width: 100%;\n    max-width: 300px;\n    min-width: 175px;\n  }\n"]))),T=(0,b.ZP)(D)(x||(x=(0,f.Z)(["\n  grid-area: rowName;\n"]))),$=(0,b.ZP)(D)(h||(h=(0,f.Z)(["\n  grid-area: rowNumber;\n"]))),q=b.ZP.button(m||(m=(0,f.Z)(["\n  grid-area: buttonSubmit;\n  margin-left: auto;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  column-gap: 20px;\n\n  padding: 5px 15px;\n  width: 100%;\n  max-width: 200px;\n\n  font-size: 20px;\n  color: white;\n  background-color: var(--button-color);\n\n  user-select: none;\n  border: solid 1px black;\n  border-radius: 3px;\n  cursor: pointer;\n\n  & svg {\n    width: 30px;\n    height: 30px;\n  }\n\n  @media (max-width: 768px) {\n    font-size: 16px;\n    column-gap: 10px;\n  }\n\n  @media (max-width: 550px) {\n    & span {\n      display: none;\n    }\n  }\n\n  @media (max-width: 480px) {\n    font-size: 16px;\n    width: 60px;\n    height: 60px;\n  }\n"]))),H=t(1413),M=t(6140),J=function(n){return M.ZP.error(n)},K=function(n){return M.ZP.success(n)},Q=function(n){var e=n.contactId,t=n.closeForm,r=n.name,i=n.number,o=(0,g.v9)(w.Rg.endpoints.getAllContacts.select()).data,a=(0,C.useState)(r),c=(0,y.Z)(a,2),s=c[0],d=c[1],u=(0,C.useState)(i),l=(0,y.Z)(u,2),p=l[0],x=l[1],h=(0,w.Lr)(),m=(0,y.Z)(h,1)[0],f=(0,w.i)(),b=(0,y.Z)(f,1)[0];return[s,d,p,x,function(n){n.preventDefault();var r=null===o||void 0===o?void 0:o.find((function(n){var e=n.name;return n.number===p&&e.toLowerCase()===s.toLowerCase()})),i=null===o||void 0===o?void 0:o.find((function(n){return n.name.toLowerCase()===s.toLowerCase()})),a={name:s,number:p};e?r?J("Contact is already exist!"):function(n){b((0,H.Z)({id:e},n)).unwrap().then((function(){return K("".concat(s," updated"))})).catch((function(n){return J("Something went wrong. Eroor: ".concat(n.status))})),t()}(a):e||(i?J("".concat(s," already exist!")):function(n){m(n).unwrap().then((function(){return K("New contact for ".concat(s," added"))})).catch((function(n){return J("Something went wrong. Eroor: ".concat(n.status))})),d(""),x("")}(a))}]};function R(n){var e=n.contactId,t=n.closeForm,r=n.name,i=void 0===r?"":r,o=n.number,a=Q({contactId:e,closeForm:t,name:i,number:void 0===o?"":o}),c=(0,y.Z)(a,5),s=c[0],d=c[1],u=c[2],l=c[3],p=c[4];return(0,j.jsxs)(B,{onSubmit:p,children:[(0,j.jsxs)(T,{children:["Name",(0,j.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"The name can only contain letters, an apostrophe, a dash, and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan, etc.",onChange:function(n){return d(n.target.value)},value:s,required:!0})]}),(0,j.jsxs)($,{children:["Phone",(0,j.jsx)("input",{type:"tel",name:"number",onChange:function(n){return l(n.target.value)},value:u,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"The phone number must be numeric and may contain spaces, dashes, parentheses, and may begin with +",required:!0})]}),(0,j.jsx)("br",{}),(0,j.jsx)(q,{type:"submit",children:e?(0,j.jsx)("span",{children:"Save changes"}):(0,j.jsxs)("span",{children:[(0,j.jsx)(P.$3V,{})," Add contact"]})})]})}var V,W=function(n){var e=n.contact,t=e.id,r=e.name,i=e.number,o=(0,C.useState)(!1),a=(0,y.Z)(o,2),c=a[0],s=a[1],d=(0,w.Nt)(),u=(0,y.Z)(d,2),l=u[0],p=u[1].isLoading;return(0,j.jsxs)(L,{id:t,children:[(0,j.jsxs)(S,{children:[r,":"]}),(0,j.jsxs)(z,{href:"tel: "+i,children:[(0,j.jsx)(P.twy,{})," ",i]}),(0,j.jsxs)(E,{type:"button",onClick:function(){return l(t).then((function(){return n="".concat(r," successfuly deleted!"),M.ZP.success(n);var n})).catch((function(){return n="Something went wrong",M.ZP.error(n);var n}))},disabled:p,children:[(0,j.jsx)(k.YK6,{})," ",(0,j.jsx)("span",{children:p?"...Deleting":"Delete"})]}),(0,j.jsxs)(E,{type:"button",onClick:function(){return s(!c)},children:[(0,j.jsx)(k.QML,{})," ",(0,j.jsx)("span",{children:"Edit"})]}),c&&(0,j.jsx)(I,{onClose:s,children:(0,j.jsx)(R,{closeForm:s,contactId:t,name:r,number:i})})]})},Y=b.ZP.ul(V||(V=(0,f.Z)(["\n  width: 100%;\n  max-width: 440px;\n  margin: 0 auto;\n"]))),G=function(){var n=(0,w.bC)(),e=n.data,t=n.isLoading,r=n.isSuccess,i=n.isError,o=n.error,a=(0,g.v9)((function(n){return n.filter}));return t?(0,j.jsx)("p",{children:"...Loading contacts"}):r&&e?(0,j.jsx)(Y,{children:function(){var n=a.toLowerCase();return null===e||void 0===e?void 0:e.filter((function(e){return e.name.toLowerCase().includes(n)}))}().map((function(n){return(0,j.jsx)(W,{contact:n},n.id)}))}):i?(0,j.jsx)("p",{children:o.message}):void 0},O=t(2702),U=function(){var n=(0,w.bC)(),e=n.isLoading,t=n.isSuccess;return(0,j.jsx)("main",{children:(0,j.jsxs)(O.W,{children:[(0,j.jsx)(O.H1,{children:"Phone book"}),(0,j.jsx)(R,{}),e&&(0,j.jsx)("p",{children:"...Loading"}),t&&(0,j.jsxs)(O.$,{children:[(0,j.jsx)(O.H2,{children:"\u0421ontacts"}),(0,j.jsx)(Z,{}),(0,j.jsx)(G,{})]})]})})},X=U}}]);
//# sourceMappingURL=795.fb42218f.chunk.js.map